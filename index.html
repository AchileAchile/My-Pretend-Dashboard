<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">

    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" type="text/css" />
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css" type="text/css" />

    <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/d3/3.5.17/d3.min.js"></script>
    <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/crossfilter/1.3.12/crossfilter.min.js"></script>
    <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/dc/2.1.8/dc.js"></script>
    <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/queue-async/1.0.7/queue.min.js"></script>
   
    
   <!-- <script type="text/javascript" src="assets/js/index.js"></script>-->
    <link rel="stylesheet" href="assets/styles.css" type="text/css" />
    
    <title>Holiday Easy</title>
</head>

<body>
    <h1>holiday <i>easy</i></h1><br>
    
    
    <section>
        <div>
            <ul id="nav">
                <li>
                    <a href="destination.html">Destination</a>
                </li>
                <li>
                    <a href="tourist.html"><i aria-hidden="true"></i><span>Tourist Attraction</span></a>
                </li>
                <li>
                    <a href="accomodation.html" aria-hidden="true"></i><span>Accomodation</span></a>
                </li>
                <li>
                    <a href="restaurants.html"><i aria-hidden="true"></i><span>Bars and Restaurants</span></a>
                </li>
            </ul>
        </div>
        <div class="container">
            <div class="input-group">
                <input type="text" class="form-control" id="my-search" placeholder="Search Me...">
            <span class="input-group-btn">
             <button class="btn btn-search" type="button"><i class="fa fa-search fa-fw"></i> Search</button>
           </span>
            </div>
        </div>
        <br>
        
       <div class="container">
            <div class="input-group">
                <input type="text" class="form-control" placeholder="Search for Bars and Restaurants...">
                <span class="input-group-btn">
             <button class="btn btn-search" type="button"><i class="fa fa-search fa-fw"></i> Search</button>
           </span>
            </div>
        </div>

        <br>

        <div class="container">
            <div class="input-group">
                <input type="text" class="form-control" placeholder="Search for Destination...">
                <span class="input-group-btn">
             <button class="btn btn-search" type="button"><i class="fa fa-search fa-fw"></i> Search</button>
           </span>
            </div>
        </div>
        <br>
        <div class="container">
            <div class="input-group">
                <input type="text" class="form-control" placeholder="Search for Tourist Attraction...">
                <span class="input-group-btn">
             <button class="btn btn-search" type="button"><i class="fa fa-search fa-fw"></i> Search</button>
           </span>
            </div>
        </div>
    </section>
    
    <aside style="background-color: white;">
        
            <h2>CUSTOMER REVIEW CHART FOR 2018</h2><br><br>
                    
            <h4>GROSS CUSTOMER FEEDBACK PER MONTH</h4>
            <div class=customer_feedback_per_month></div>
                
            <h4>GROSS CUSTOMER FEEDBACK PER WEEK</h4>
            <div class="customer_feedback_per_week"></div>
            
            
            <h4>CUSTOMER FEEDBACK PER MONTH</h4>
            <span class="pie_customers_feedback_per_month"></span>
                
            <h4>CUSTOMER FEEDBACK PER WEEK</h4>
            <span class="pie_customer_feedback_per_week"></span>
            
            
            <h4>WEEKLY PRESENTATION OF ANNUAL CUSTOMER FEEDBACK</h4>
            <div class="date_annual_customers_feedback_chart"></div><br><br>
                
            <h4>LINEAR PRESENTATION OF ANNUAL CUSTOMER FEEDBACK</4>
            <div class="line_annual_customers_feedback"></div><br><br>
           
            <h4>COMPOSITE CHART SHOWING A WEEKLY CUSTOMER REVIEW DATA FOR EACH MONTH</h4>
            <div class="composite-chart"></div>
            
            <h4>COMPOSITE CHART SHOWING A MONTHLY PRESENTATION OF CUSTOMER REVIEW DATA</h4>
            <div class="composite-month"></div>
            
            <h4>WEEKLY PRESENTATION OF CUSTOMER REVIEW DATA PER MONTH</h4>
            <div class="stacked_chart_week"></div>
            
            <h4>SCATTER PLOT SHOWING A WEEKLY CUSTOMER REVIEW DATA FOR THE YEAR</h4>
            <div class="scatter-plot"></div><br><br>
            
            <h4>DERIVED DIMENSIONS</h4>
            <span class="derived"></span>
            
            <h4>AVERAGE RATING PER MONTH</h4>
            <div class="average_rating_month">
                <a class="reset" href="javascript:gainOrLossChart.filterAll();dc.redrawAll();" style="display: none;">reset</a>
                <span class="reset" style="display: none;">Current filter: <span class="filter"></span>
            </div>
            
            <h4>BUBBLE BAR CHART FOR 2018</h4>
            <div class="bubble_chart">
                <a class="reset" href="javascript:gainOrLossChart.filterAll();dc.redrawAll();" style="display: none;">reset</a>
                <span class="reset" style="display: none;">Current filter: <span class="filter"></span>
            </div>
        
    </aside>
    
    <br><br>
    
    <footer>
        <ul class="list-inline social-links">
            <li><a target="_blank" href="#"><i class="fa fa-facebook"></i></a></li>
            <li><a target="_blank" href="#"><i class="fa fa-twitter"></i></a></li>
            <li><a target="_blank" href="#"><i class="fa fa-linkedin"></i></a></li>
            <li><a target="_blank" href="#"><i class="fa fa-pinterest"></i></a></li>
            <li><a target="_blank" href="#"><i class="fa fa-instagram"></i></a></li>
            <li><a target="_blank" href="#"><i class="fa fa-youtube"></i></a></li>
        </ul>
    </footer>
    <script>
        var customerReviewData = [
                {"date": "01/01/2018", "Month": "Jan", "week": "first",  "rating":50},
                {"date": "01/02/2018", "Month": "Feb", "week": "first", "rating": 91},
                {"date": "01/03/2018", "Month": "Mar", "week": "first", "rating": 11},
                {"date": "01/04/2018", "Month": "Apr", "week": "first", "rating": 60},
                {"date": "01/05/2018", "Month": "May", "week": "first", "rating": 75},
                {"date": "01/06/2018", "Month": "Jun", "week": "first", "rating": 99},
                {"date": "01/07/2018", "Month": "Jul", "week": "first", "rating": 77},
                {"date": "01/08/2018", "Month": "Aug","week": "first", "rating": 89},
                {"date": "01/09/2018", "Month": "Sept","week": "first", "rating": 80},
                {"date": "01/10/2018", "Month": "Oct", "week": "first", "rating": 99},
                {"date": "01/11/2018", "Month": "Nov", "week": "first", "rating": 100},
                {"date": "01/12/2018", "Month": "Dec", "week": "first", "rating": 11},
                {"date": "08/01/2018", "Month": "Jan", "week": "second",  "rating": 23},
                {"date": "05/02/2018", "Month": "Feb", "week": "second", "rating": 60},
                {"date": "05/03/2018", "Month": "Mar", "week": "second", "rating": 95},
                {"date": "09/04/2018", "Month": "Apr", "week": "second", "rating": 26},
                {"date": "07/05/2018", "Month": "May", "week": "second", "rating": 27},
                {"date": "04/06/2018", "Month": "Jun", "week": "second", "rating": 18},
                {"date": "09/07/2018", "Month": "Jul", "week": "second", "rating": 69},
                {"date": "06/08/2018", "Month": "Aug","week": "second", "rating": 70},
                {"date": "10/09/2018", "Month": "Sept","week": "second", "rating": 39},
                {"date": "08/10/2018", "Month": "Oct", "week": "second", "rating": 70},
                {"date": "05/10/2018", "Month": "Nov", "week": "second", "rating": 33},
                {"date": "10/12/2018", "Month": "Dec", "week": "second", "rating": 39},
                {"date": "15/01/2018", "Month": "Jan", "week": "third",  "rating": 15},
                {"date": "19/02/2018", "Month": "Feb", "week": "third", "rating": 100},
                {"date": "12/03/2018", "Month": "Mar", "week": "third", "rating": 99},
                {"date": "16/04/2018", "Month": "Apr", "week": "third", "rating": 30},
                {"date": "21/05/2018", "Month": "May", "week": "third", "rating": 98},
                {"date": "18/06/2018", "Month": "Jun", "week": "third", "rating": 60},
                {"date": "18/07/2018", "Month": "Jul", "week": "third", "rating": 37},
                {"date": "16/08/2018", "Month": "Aug","week": "third", "rating": 75},
                {"date": "13/09/2018", "Month": "Sept","week": "third", "rating": 33},
                {"date": "15/10/2018", "Month": "Oct", "week": "third", "rating": 54},
                {"date": "19/11/2018", "Month": "Nov", "week": "third", "rating": 75},
                {"date": "17/11/2018", "Month": "Dec", "week": "third", "rating": 66},
                {"date": "22/01/2018", "Month": "Jan", "week": "fourth",  "rating": 60},
                {"date": "26/02/2018", "Month": "Feb", "week": "fourth", "rating": 80},
                {"date": "26/03/2018", "Month": "Mar", "week": "fourth", "rating": 99},
                {"date": "23/04/2018", "Month": "Apr", "week": "fourth", "rating": 63},
                {"date": "21/05/2018", "Month": "May", "week": "fourth", "rating": 60},
                {"date": "25/06/2018", "Month": "Jun", "week": "fourth", "rating": 47},
                {"date": "23/07/2018", "Month": "Jul", "week": "fourth", "rating": 40},
                {"date": "20/08/2018", "Month": "Aug","week": "fourth", "rating": 55},
                {"date": "24/09/2018", "Month": "Sept","week": "fourth", "rating": 75},
                {"date": "22/10/2018", "Month": "Oct", "week": "fourth", "rating": 66},
                {"date": "26/11/2018", "Month": "Nov", "week": "fourth", "rating": 97},
                {"date": "24/12/2018", "Month": "Dec", "week": "fourth", "rating": 100},
            ];
            
            
            var ndx = crossfilter(customerReviewData);
            
            var parseDate = d3.time.format("%d/%m/%Y").parse;
            customerReviewData.forEach(function(d){
               d.date = parseDate(d.date);
            });
            
            var minDate = ndx.dimension(dc.pluck('date')).bottom(1)[0].date;
            var maxDate = ndx.dimension(dc.pluck('date')).top(1)[0].date;
             
             
            
            
            
            
            var Month_dim = ndx.dimension(dc.pluck('Month'));
            var total_rating_per_Month = Month_dim.group().reduceSum(dc.pluck('rating'));
            dc.barChart(".customer_feedback_per_month")
                .width(600)
                .height(300)
                .margins({top: 20, right: 50, bottom: 40, left: 50})
                .dimension(Month_dim)   
                .group(total_rating_per_Month)
                //.colors(['#3182bd', '#6baed6', '#9ecae1', '#c6dbef', '#dadaeb'])
                //.colorDomain([-1750, 1644])
                //.colorAccessor(function(d, i){return d.rating;})
                .transitionDuration(500)
                .x(d3.scale.ordinal())
                .xUnits(dc.units.ordinal)
                .xAxisLabel("Rating Per Month")
                .elasticY(true)
                .yAxisPadding(2)
                .yAxis().ticks(5);
                
                
            var week_dim = ndx.dimension(dc.pluck('week'));
            var total_rating_per_week = week_dim.group().reduceSum(dc.pluck('rating'));
            dc.barChart(".customer_feedback_per_week")
                .width(600)
                .height(300)
                .margins({top: 20, right: 50, bottom: 40, left: 50})
                .dimension(week_dim)   
                .group(total_rating_per_week)
                .transitionDuration(500)
                .x(d3.scale.ordinal())
                .xUnits(dc.units.ordinal)
                .xAxisLabel("Rating per Week")
                .yAxis().ticks(5);
                
                
            var Monthly_dim = ndx.dimension(dc.pluck('Month'));
            var total_rating_per_Monthly = Monthly_dim.group().reduceSum(dc.pluck('rating'));
            dc.pieChart(".pie_customers_feedback_per_month")
                .height(250)
                .radius(120)
                .transitionDuration(1500)
                .dimension(Monthly_dim)
                .group(total_rating_per_Monthly);
                
                
            var weekly_dim = ndx.dimension(dc.pluck('week'));
            var total_rating_per_weekly = weekly_dim.group().reduceSum(dc.pluck('rating'));
            dc.pieChart(".pie_customer_feedback_per_week")
                .height(250)
                .innerRadius(60)
                .transitionDuration(1500)
                .dimension(weekly_dim)
                .group(total_rating_per_weekly);
                
            
          
         
            var Date_chart_dim = ndx.dimension(dc.pluck('date'));
            var total_period_rating = Date_chart_dim.group().reduceSum(dc.pluck('rating'));
            /**var minDate = Date_chart_dim.bottom(1)[0].date;
            var maxDate = Date_chart_dim.top(1)[0].date;**/
            dc.barChart(".date_annual_customers_feedback_chart")
                .width(900)
                .height(400)
                .margins({top: 10, right: 50, bottom: 30, left: 50})
                .dimension(Date_chart_dim)   
                .group(total_period_rating)
                .transitionDuration(500)
                .x(d3.time.scale().domain([minDate, maxDate]))
                .xAxisLabel("2018 Annual Rating")
                .yAxis().ticks(5);
                        
                        
            var date_dim = ndx.dimension(dc.pluck('date'));
            var period_review_per_month = date_dim.group().reduceSum(dc.pluck('rating'));
            //var minDate = date_dim.bottom(1)[0].date;
            //var maxDate = date_dim.top(1)[0].date;
            dc.lineChart(".line_annual_customers_feedback")
                .width(1200)
                .height(400)
                .margins({top: 10, right: 50, bottom: 30, left: 50})
                .dimension(date_dim)   
                .group(period_review_per_month)
                .transitionDuration(500)
                .x(d3.time.scale().domain([minDate, maxDate]))
                .xAxisLabel("Month")
                .brushOn(false)
                .yAxis().ticks(5);
                
/**********************************************************************************COMPOSITE*******************************************************************/
         
          var composite_date_dim = ndx.dimension(dc.pluck('date'));
          
          var ratingInJan = composite_date_dim.group().reduceSum(function(d){
              if (d.Month === 'Jan'){
                  return +d.rating;
              }else{
                  return 0;
              }
          });
          
          var ratingInFeb = composite_date_dim.group().reduceSum(function(d){
              if (d.Month === "Feb"){
                  return +d.rating;
              }else{
                  return 0;
              }
          });
          
          var ratingInMar = composite_date_dim.group().reduceSum(function(d){
              if (d.Month === "Mar"){
                  return +d.rating;
              }else{
                  return 0;
              }
          });
          
          var ratingInApr = composite_date_dim.group().reduceSum(function(d){
              if (d.Month === "Apr"){
                  return +d.rating;
              }else{
                  return 0;
              }
          });
          
          var ratingInMay = composite_date_dim.group().reduceSum(function(d){
              if (d.Month === "May"){
                  return +d.rating;
              }else{
                  return 0;
              }
          });
          
          var ratingInJun = composite_date_dim.group().reduceSum(function(d){
              if (d.Month === "Jun"){
                  return +d.rating;
              }else{
                  return 0;
              }
          });
          
          var ratingInJul = composite_date_dim.group().reduceSum(function(d){
              if (d.Month === "Jul"){
                  return +d.rating;
              }else{
                  return 0;
              }
          });
          
          var ratingInAug = composite_date_dim.group().reduceSum(function(d){
              if (d.Month === "Aug"){
                  return +d.rating;
              }else{
                  return 0;
              }
          });
          
          var ratingInSept = composite_date_dim.group().reduceSum(function(d){
              if (d.Month === "Sept"){
                  return +d.rating;
              }else{
                  return 0;
              }
          });
          
          var ratingInOct = composite_date_dim.group().reduceSum(function(d){
              if (d.Month === "Oct"){
                  return +d.rating;
              }else{
                  return 0;
              }
          });
          
          var ratingInNov = composite_date_dim.group().reduceSum(function(d){
              if (d.Month === "Nov"){
                  return +d.rating;
              }else{
                  return 0;
              }
          });
          
          var ratingInDec = composite_date_dim.group().reduceSum(function(d){
              if (d.Month === "Dec"){
                  return +d.rating;
              }else{
                  return 0;
              }
          });
          
          
          var compositeChart = dc.compositeChart('.composite-month');
          compositeChart
                .width(900)
                .height(400)
                .dimension(composite_date_dim)
                .x(d3.time.scale().domain([minDate, maxDate]))
                .yAxisLabel("Rating")
                .legend(dc.legend().x(80).y(20).itemHeight(13).gap(5))
                .renderHorizontalGridLines(true)
                .compose([
                dc.lineChart(compositeChart)
                    .colors('green')
                    .group(ratingInJan, 'Jan'),
                dc.lineChart(compositeChart)
                    .colors('gold')
                    .group(ratingInFeb, 'Feb'),
                dc.lineChart(compositeChart)
                    .colors('red')
                    .group(ratingInMar, 'Mar'),
                dc.lineChart(compositeChart)
                    .colors('orange')
                    .group(ratingInApr, 'Apr'),
                dc.lineChart(compositeChart)
                    .colors('black')
                    .group(ratingInMay, 'May'),
                dc.lineChart(compositeChart)
                    .colors('yellow')
                    .group(ratingInJun, 'Jun'),
                dc.lineChart(compositeChart)
                    .colors('black')
                    .group(ratingInJul, 'Jul'),
                dc.lineChart(compositeChart)
                    .colors('blue')
                    .group(ratingInAug, 'Aug'),
                dc.lineChart(compositeChart)
                    .colors('pink')
                    .group(ratingInSept, 'Sept'),
                dc.lineChart(compositeChart)
                    .colors('purple')
                    .group(ratingInOct, 'Oct'),
                dc.lineChart(compositeChart)
                    .colors('tan')
                    .group(ratingInNov, 'Nov'),
                dc.lineChart(compositeChart)
                    .colors('grey')
                    .group(ratingInDec, 'Dec')
                    ])
                    
                    .brushOn(false)
                    .yAxis().ticks(4);
                    
                    
                    
                    
         var composite_week_dim = ndx.dimension(dc.pluck('week'));
         var ratingInfirst = composite_week_dim.group().reduceSum(function(d){
              if (d.week === 'first'){
                  return +d.rating;
              }else{
                  return 0;
              }
          });
          
         
         var ratingInfirst = composite_week_dim.group().reduceSum(function(d){
              if (d.week === 'first'){
                  return +d.rating;
              }else{
                  return 0;
              }
          });
          
           var ratingInsecond = composite_week_dim.group().reduceSum(function(d){
              if (d.week === 'second'){
                  return +d.rating;
              }else{
                  return 0;
              }
          });
          
           var ratingInthird = composite_week_dim.group().reduceSum(function(d){
              if (d.week === 'third'){
                  return +d.rating;
              }else{
                  return 0;
              }
          });
          
           var ratingInfourth = composite_week_dim.group().reduceSum(function(d){
              if (d.week === 'fourth'){
                  return +d.rating;
              }else{
                  return 0;
              }
          });
          
          var compositeChart = dc.compositeChart('.composite-chart');
          compositeChart
                .width(900)
                .height(300)
                .dimension(composite_week_dim)
                .x(d3.time.scale().domain([minDate, maxDate]))
                .yAxisLabel("Rating")
                .legend(dc.legend().x(80).y(20).itemHeight(13).gap(5))
                .renderHorizontalGridLines(true)
                .compose([
                    dc.lineChart(compositeChart)
                        .colors('green')
                        .group(ratingInfirst, 'first'),
                    dc.lineChart(compositeChart)
                        .colors('red')
                        .group(ratingInsecond, 'second'),
                    dc.lineChart(compositeChart)
                        .colors('black')
                        .group(ratingInthird, 'third'),
                    dc.lineChart(compositeChart)
                        .colors('orange')
                        .group(ratingInfourth, 'fourth')
          
          ])
                .brushOn(false);
                
    /**</*****************************************************************************COMPOSITE********************>*****************/
                
                var stacked_Month_dim = ndx.dimension(dc.pluck('Month'));
                
                var first_week_stacked = stacked_Month_dim.group().reduceSum(function (d){
                    if (d.week === 'first'){
                        return +d.rating;
                    }else{
                        return 0;
                    }
                });
                
                 var second_week_stacked = stacked_Month_dim.group().reduceSum(function (d){
                    if (d.week === 'second'){
                        return +d.rating;
                    }else{
                        return 0;
                    }
                });
                
                 var third_week_stacked = stacked_Month_dim.group().reduceSum(function (d){
                    if (d.week === 'third'){
                        return +d.rating;
                    }else{
                        return 0;
                    }
                });
                
                 var fourth_week_stacked = stacked_Month_dim.group().reduceSum(function (d){
                    if (d.week === 'fourth'){
                        return +d.rating;
                    }else{
                        return 0;
                    }
                });
                
                var stackedChart = dc.barChart(".stacked_chart_week")
                stackedChart
                    .width(900)
                    .height(390)
                    .dimension(stacked_Month_dim)
                    .group(first_week_stacked, "first")
                    .stack(second_week_stacked, "second")
                    .stack(third_week_stacked, "third")
                    .stack(fourth_week_stacked, "fourth")
                    .x(d3.scale.ordinal())
                    .xUnits(dc.units.ordinal)
                    .legend(dc.legend().x(420).y(0).itemHeight(15).gap(5));
                    
                stackedChart.margins().right = 100;
                
                
                
               
               
                var scatter_date_dim = ndx.dimension(dc.pluck('date'));
                
                var rating_dim = ndx.dimension(function (d){
                    return [d.date, d.rating, d.week];
                });
               
                
                
                var rating_group = rating_dim.group();
                var weekly_colors = d3.scale.ordinal()
                            .domain(["first", "second", "third", "fourth"])
                            .range(["red", "green", "blue", "yellow"]);
                
                var rating_chart = dc.scatterPlot(".scatter-plot");
                rating_chart
                    .width(900)
                    .height(400)
                    .x(d3.time.scale().domain([minDate, maxDate]))
                    .brushOn(false)
                    .symbolSize(8)
                    .clipPadding(10)
                    .yAxisLabel("Rating")
                    .title(function (d){
                        return d.key[2] + " week rating equals " +d.key[1] + " on " +d.key[0];
                    })
                    .colorAccessor(function (d){
                        return d.key[2];
                    })
                    .colors(weekly_colors)
                    .dimension(rating_dim)
                    .group(rating_group);
                    
            var size_dimension = ndx.dimension(function (d){
                if (d.rating >= 70){
                    return "Excellent";
                }else if
                    (d.rating > 50 && d.rating <= 70){
                        return "Good";
                    }else{
                        return "Poor";
                    }
                }
            );
            var size_group = size_dimension.group();
            console.log(size_group.all);
            dc.pieChart(".derived")
            .height(330)
            .radius(90)
            .dimension(size_dimension)
            .group(size_group);
            
        var average_rating_dim = ndx.dimension(dc.pluck('Month')); 
        //var average_rating_month = average_rating_dim.group().reduce(adder, remover, initialiser);
        var average_rating_month = average_rating_dim.group().reduce(
            
           function (p, v){
               p.count++;
               p.total += v.rating;
               p.average = p.total / p.count;
               return p;
           },
           
           function (p, v){
               p.count--;
               if (p.count == 0 ){
                   p.total = 0;
                   p.average = 0;
               }else{
                   p.total -= v.rating;
                   p.total = p.total / p.count;
               }
               return p;
           },
            function(){
                return { count: 0, total: 0, average: 0};
            }
            
            );
        var average_total_rating_month = dc.barChart(".average_rating_month");
        average_total_rating_month
                    .width(500)
                    .height(300)
                    .dimension(average_rating_dim)
                    .group(average_rating_month)
                    .valueAccessor(function (d){
                        return d.value.average;
                    })
                    .x(d3.scale.ordinal())
                    .xUnits(dc.units.ordinal);
                    
   // var week_dim = ndx.dimension(dc.pluck('week'));
   // var total_rating_per_week = week_dim.group().reduceSum(dc.pluck('rating'));                
                    
   var date_bubble_dim = ndx.dimension(dc.pluck('date')); 
   var bubble_Chart = date_bubble_dim.group().reduceSum(dc.pluck('rating'));
   dc.bubbleChart(".bubble_chart")
                .width(900)
                .height(250)
                //.transition(1000)
                .margins({top: 10, right: 50, bottom: 30, left: 40})
                .dimension(bubble_Chart)
                .group(date_bubble_dim)
                .colors(["red", "#ccc", "steelblue", "green"])
                .colorDomain([-1750, 1644])
                .colorAccessor(function (d,i){return d.rating.absGain;})
                .keyAccessor(function(p){return p.rating.absGain;})
                .valueAccessor(function(p){return p.rating.percentageGain;})
                .radiusValueAccessor(function(p) { return p.rating.fluctuationPercentage;})
                .x(d3.scale.linear().domain([-2500, 2500]))
                .y(d3.scale.linear().domain([-100, 100]))
               // .r(d3.scale.linear.domain([0, 4000]))
                //.renderLabel(true)
                //.label(function(p){ return p.key.getFullYear();})
                //.renderTitle(true);
                
                
                
                
   
                
                
                

dc.renderAll();
                    
                    
          </script>          
                    
                    
                    
                    
                    
 
           
               

    <script>
        function activatePlacesSearch(){
            var input = document.getElementById("my-search");
            var autocomplete = new google.maps.places.Autocomplete(input);
        }
    </script>
    <!--<script type="text/javascript" src="https://maps.googleapis.com/maps/api/js?key=AIzaSyBGCkQdSjI2Vmc51hUJHz-vkOjCZbHbKEM=places&callback=activatePlacesSearch"></script>-->
   
    <!--<script src="https://cdnjs.cloudflare.com/ajax/libs/d3/3.5.17/d3.min.js"></script>
     <script src="https://d3js.org/d3.v4.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/d3/3.5.5/d3.min.js" charset="utf-8"></script>-->
    
</body>
</html>
